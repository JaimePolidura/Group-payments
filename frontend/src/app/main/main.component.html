<div class="group-container div-config-dif-background" *ngIf="isInGroup()">
  <div class="group-options">
    <div class="group-options-stats">
      <h4>{{currentGroup.description}} - {{currentGroup.money}}</h4>
    </div>
    <div class="group-options-options">
      <button class="group-option-button" (click)="modalService.open(shareGroupModal)">
        <i class="fa-solid fa-share-nodes fa-2x"></i>
      </button>
      <button class="group-option-button" (click)="leaveGroup()">
        <i class="fa-solid fa-arrow-right-from-bracket fa-2x"></i>
      </button>
    </div>
  </div>
  <div class="group-separator"><hr></div>
  <div class="group-members">
    <h6 *ngFor="let member of currentGroupMembers">{{member.username}}</h6>
  </div>
</div>

<div class="myContainer div-config-dif-background" *ngIf="!isInGroup()">
  <h4 style="text-align: center">Welcome {{auth.getName()}}</h4>
  <br>

  <div class="options">
    <button class="btn btn-primary" (click)="modalService.open(joinGroupModal)">Join</button><br>
    <button class="btn btn-primary" (click)="modalService.open(createGroupModal)">Create</button>
  </div>
</div>


<ng-template #joinGroupModal let-modal>
  <form action="" [formGroup]="joinGroupForm" (ngSubmit)="joinGroupForm.valid && joinGroup() && modalService.dismissAll() && modal.dismiss()">
    <div class="modal-header">
      <h2 style="text-align: center">Join group</h2>
      <button class="btn-close" type="button" (click)="modal.dismiss()"></button>
    </div>
    <div class="modal-body modal-body-centered">
      <input type="text"
             id = "groupId"
             class="form-control"
             placeholder="link"
             formControlName="groupId"
             (keyup)="checkIfGroupToJoinExists();"
             [ngClass]="{'is-invalid': joinGroupForm.errors && (joinGroupForm.touched || joinGroupForm.dirty)}">
    </div>
    <div class="modal-footer">
      <button type="submit" class="myButton myButton-footer" [ngClass]="{'myDisabled': !joinGroupForm.valid}">Join</button>
    </div>
  </form>
</ng-template>

<ng-template #createGroupModal let-modal>
  <form action = "" [formGroup]="createGroupForm" (ngSubmit)="createGroupForm.valid && createGroup()">
    <div class="modal-header">
      <h2 style="text-align: center">Create group</h2>
      <button class="btn-close" type="button" (click)="modal.dismiss()"></button>
    </div>
    <div class="modal-body modal-body-centered">
      <input type="number"
             class="form-control"
             placeholder="money"
             formControlName = "money"
             [ngClass]="{'is-invalid': createGroupForm.errors && (createGroupForm.touched || createGroupForm.dirty)}"><br>
      <input type="text"
             class="form-control"
             placeholder="title"
             formControlName = "title"
             [ngClass]="{'is-invalid': createGroupForm.errors && (createGroupForm.touched || createGroupForm.dirty)}">
    </div>
    <div class="modal-footer">
      <button type="submit" class="myButton myButton-footer" [ngClass]="{'myDisabled': !createGroupForm.valid}">Create</button>
    </div>
  </form>
</ng-template>

<ng-template #shareGroupModal let-modal>
    <div class="modal-header">
      <h2 style="text-align: center">Share</h2>
      <button class="btn-close" type="button" (click)="modal.dismiss()"></button>
    </div>
    <div class="modal-body modal-body-centered">
      <h5 style="text-align: center" id="groupIdToShare">{{currentGroup.groupId}}</h5>
    </div>
    <div class="modal-footer">
      <button type="submit" class="myButton myButton-footer" (click)="copyToClipboard(currentGroup.groupId)">Copy</button>
    </div>
</ng-template>
